var stickerbomb=function(a){function d(a){var b=(new Date).getTime();console.log("Stickerbomb Error @ "+b+": "+a)}function e(a,b,c,d,e){a-=d,b-=e,c=c*Math.PI/180;var f=a*Math.cos(c)-b*Math.sin(c)+d,g=a*Math.sin(c)+b*Math.cos(c)+e;return[f,g]}function f(a,c,d){var f=b[a],g=Math.floor(.01*c.widthPercentage*(d?f.canvas.width:f.canvas.offsetWidth)),h=Math.floor(g*c.heightFxWidth);"center"===c.left&&(c.left=Math.floor((f.canvasHCenter-g/2)/(d?f.canvas.width:f.canvas.offsetWidth)*100)),"center"===c.top&&(c.top=Math.floor((f.canvasVCenter-h/2)/(d?f.canvas.height:f.canvas.offsetHeight)*100));var i=.01*c.left*(d?f.canvas.width:f.canvas.offsetWidth),j=.01*c.top*(d?f.canvas.height:f.canvas.offsetHeight),k=i+g,l=j+h,m=i+g/2,n=j+h/2,o=(m-i)*-1,p=(n-j)*-1;return{width:g,height:h,left:i,top:j,right:k,bottom:l,vertLT:e(i,j,c.angle,m,n),vertLB:e(i,l,c.angle,m,n),vertRT:e(k,j,c.angle,m,n),vertRB:e(k,l,c.angle,m,n),hCenter:m,vCenter:n,offsetH:o,offsetV:p,angle:c.angle}}function g(a){var c=b[a],d=c.canvas,e=c.aspectRatio;d.setAttribute("width",d.offsetWidth),d.setAttribute("height",d.offsetWidth/e),c.canvasHCenter=Math.floor(d.offsetWidth/2),c.canvasVCenter=Math.floor(d.offsetHeight/2),c.drawerButtons[0].style.display="inline-block",c.drawerButtons[1].style.display="inline-block";var f=c.drawerButtonBar.clientWidth-c.drawerButtons[0].clientWidth-c.drawerButtons[1].clientWidth,g=c.drawerButtonSlider.clientWidth;g<f?(c.drawerButtons[0].style.display="none",c.drawerButtons[1].style.display="none",c.drawerButtonSlider.style.left="0px"):(c.drawerButtons[0].style.display="inline-block",c.drawerButtons[1].style.display="inline-block"),i(a)}function h(a,c,d,e){var f=b[a],h=f.canvas;d=d||1550,e=e||1e3,c=c||function(){},h.setAttribute("width",d),h.setAttribute("height",e),f.canvasHCenter=Math.floor(d/2),f.canvasVCenter=Math.floor(e/2),i(a,!0,c),g(a)}function i(a,c,d){setTimeout(function(){var e=b[a];c=!!c,e.context.drawImage(e.backdrop,0,0,c?e.canvas.width:e.canvas.offsetWidth,c?e.canvas.height:e.canvas.offsetHeight);var g=e.objects.length;0===g&&"function"==typeof d&&d();for(var h=0;h<g;h++){var i=e.objects[h],j=f(a,i,c);e.context.translate(j.hCenter,j.vCenter),e.context.rotate(j.angle*(Math.PI/180)),e.guides&&(e.context.fillStyle="rgba("+i.guideColor+",0.5)",e.context.fillRect(j.offsetH,j.offsetV,j.width,j.height)),i.mirror&&(e.context.save(),e.context.scale(-1,1)),e.context.drawImage(i.image,j.offsetH,j.offsetV,j.width,j.height),i.mirror&&e.context.restore(),e.context.rotate(-1*(j.angle*(Math.PI/180))),e.guides&&(e.context.font="50px sans-serif",e.context.fillStyle="rgb(255,255,255)",e.context.strokeStyle="rgb(0,0,0)",e.context.fillText(h,-13,20),e.context.strokeText(h,-13,20)),e.context.translate(-1*j.hCenter,-1*j.vCenter),h===g-1&&"function"==typeof d&&d()}},0)}function j(a,c,d,e){function h(){var b,a=f.stickers[c][d];return b="function"==typeof a.guideColor?a.guideColor():a.guideColor,{hash:a.hash,image:a.image,top:"number"==typeof e.top?e.top:a.top,left:"number"==typeof e.left?e.left:a.left,widthPercentage:e.widthPercentage||a.widthPercentage,heightFxWidth:a.heightFxWidth,angle:e.angle||0,guideColor:b,mirror:e.mirror||!1}}var f=b[a];e=e||{};var g;e.hash&&(g=k(a,e.hash),c=g[0],d=g[1]),c!==!1&&d!==!1&&(f.objects.push(h()),F(a),i(a))}function k(a,c){var e,d=b[a];for(var f in d.stickers)for(e=0;e<d.stickers[f].length;e++)if(d.stickers[f][e].hash===c)return[f,e];return[!1,!1]}function n(a,c){var d=(new Date).getTime();if(!(d-m<200)){m=d;var e=b[a],i=(parseInt(window.getComputedStyle(document.body,null).getPropertyValue("margin-top")),parseInt(window.getComputedStyle(document.body,null).getPropertyValue("margin-left")),parseInt(window.getComputedStyle(e.container,null).getPropertyValue("padding-left"))),j=p(e.container);click=[(c.clientX||c.touches[0].clientX)-j[0]-i,(c.clientY||c.touches[0].clientY)-j[1]+(window.scrollY||document.documentElement.scrollTop)],hit=o(a,click);var k=function(b){t(a,b,hit,n)};if(hit>=0)if(v(b[a].tool))u(a,hit);else{var l=f(a,e.objects[hit]),n={origin:[e.objects[hit].left,e.objects[hit].top],center:[l.hCenter,l.vCenter],scale:e.objects[hit].widthPercentage,angle:l.angle,dragStartAngle:Math.floor(180*Math.atan2(click[1]-l.vCenter,click[0]-l.hCenter)/Math.PI)};e.canvas.addEventListener("mousemove",k),e.canvas.addEventListener("touchmove",k),e.canvas.addEventListener("mouseup",function(){e.canvas.removeEventListener("mousemove",k)}),e.canvas.addEventListener("touchend",function(){e.canvas.removeEventListener("touchend",k)})}}}function o(a,c){for(var g,d=b[a],e=-1,h=0;h<d.objects.length;h++)g=f(a,d.objects[h]),q(c,g)&&(e=h);return e}function p(a){for(var b=a.offsetLeft,c=a.offsetTop;a.offsetParent&&a!=document.getElementsByTagName("body")[0];)b+=a.offsetParent.offsetLeft,c+=a.offsetParent.offsetTop,a=a.offsetParent;var d=[b,c];return d}function q(a,b){var c=Math.round((b.bottom-b.top)*(b.right-b.left)),d=[[r(a[0],a[1],b.vertLT[0],b.vertLT[1]),r(a[0],a[1],b.vertLB[0],b.vertLB[1]),r(b.vertLT[0],b.vertLT[1],b.vertLB[0],b.vertLB[1])],[r(a[0],a[1],b.vertLT[0],b.vertLT[1]),r(a[0],a[1],b.vertRT[0],b.vertRT[1]),r(b.vertLT[0],b.vertLT[1],b.vertRT[0],b.vertRT[1])],[r(a[0],a[1],b.vertRT[0],b.vertRT[1]),r(a[0],a[1],b.vertRB[0],b.vertRB[1]),r(b.vertRT[0],b.vertRT[1],b.vertRB[0],b.vertRB[1])],[r(a[0],a[1],b.vertLB[0],b.vertLB[1]),r(a[0],a[1],b.vertRB[0],b.vertRB[1]),r(b.vertLB[0],b.vertLB[1],b.vertRB[0],b.vertRB[1])]],e=[s(d[0][0],d[0][1],d[0][2]),s(d[1][0],d[1][1],d[1][2]),s(d[2][0],d[2][1],d[2][2]),s(d[3][0],d[3][1],d[3][2])],f=Math.round(e.reduce(function(a,b){return a+b},0));return!(f>c)}function r(a,b,c,d){return Math.sqrt(Math.pow(a-c,2)+Math.pow(b-d,2))}function s(a,b,c){var d=(a+b+c)/2;return Math.sqrt(d*(d-a)*(d-b)*(d-c))}function t(a,c,d,e){var f=b[a],g={},k=(parseInt(window.getComputedStyle(document.body,null).getPropertyValue("margin-top")),parseInt(window.getComputedStyle(document.body,null).getPropertyValue("margin-left")),parseInt(window.getComputedStyle(f.container,null).getPropertyValue("padding-left"))),l=p(f.container);switch(g.client=[c.clientX||c.touches[0].clientX,c.clientY||c.touches[0].clientY],g.current=[(c.clientX||c.touches[0].clientX)-l[0]-k,(c.clientY||c.touches[0].clientY)-l[1]+(window.scrollY||document.documentElement.scrollTop)],g.delta=[g.current[0]-click[0],g.current[1]-click[1]],g.percentDelta=[Math.floor(g.delta[0]/f.canvas.offsetWidth*100),Math.floor(g.delta[1]/f.canvas.offsetHeight*100)],g.angle=Math.floor(180*Math.atan2(g.current[1]-e.center[1],g.current[0]-e.center[0])/Math.PI),f.tool){case"move":x(a,d,g,e);break;case"scale":y(a,d,g,e);break;case"rotate":z(a,d,g,e)}i(a)}function u(a,c){var d=b[a];switch(d.tool){case"mirror":A(a,c);break;case"delete":B(a,c);break;case"back":C(a,c);break;case"forward":D(a,c)}i(a)}function v(a){return"mirror"===a||"back"===a||"forward"===a||"delete"===a}function w(a,c){var d=b[a];F(a);for(var e in d.toolNodes)d.toolNodes[e].classList.remove("active");d.toolNodes[c].classList.add("active"),d.tool=c,v(c)?d.guides=!0:d.guides=!1,i(a)}function x(a,c,d,e){var f=b[a];f.objects[c].left=e.origin[0]+d.percentDelta[0],f.objects[c].top=e.origin[1]+d.percentDelta[1]}function y(a,c,d,e){var f=b[a],g=Math.floor((d.percentDelta[0]+d.percentDelta[1])/2),h=e.scale+g;f.objects[c].widthPercentage>0?f.objects[c].widthPercentage=h>0?h:1:f.objects[c].widthPercentage=h<0?h:-1}function z(a,c,d,e){var f=b[a];f.objects[c].angle=e.angle-(e.dragStartAngle-d.angle)}function A(a,c){var d=b[a];d.objects[c].mirror=!d.objects[c].mirror}function B(a,c){var d=b[a];d.objects.splice(c,1)}function C(a,c){var d=b[a];if(c>0){var e=d.objects[c-1],f=d.objects[c];d.objects[c-1]=f,d.objects[c]=e}}function D(a,c){var d=b[a];if(c<d.objects.length-1){var e=d.objects[c],f=d.objects[c+1];d.objects[c]=f,d.objects[c+1]=e}}function E(a,c){var d=b[a];return d.drawerNodes.content[c].classList.contains("active")?void F(a):(F(a),d.drawerNodes.content[c].classList.add("active"),d.drawerNodes.button[c].classList.add("active"),void d.barNodes.drawerbar.classList.add("active"))}function F(a){var c=b[a];for(var d in c.drawerNodes.button)c.drawerNodes.button[d].classList.remove("active");for(d in c.drawerNodes.content)c.drawerNodes.content[d].classList.remove("active");c.barNodes.drawerbar.classList.remove("active")}function G(a){function f(a){for(var b=atob(a.split(",")[1]),c=a.split(",")[0].split(":")[1].split(";")[0],d=new ArrayBuffer(b.length),e=new Uint8Array(d),f=0;f<b.length;f++)e[f]=b.charCodeAt(f);var g=new Blob([d],{type:c});return g}var c=b[a],d=c.canvas.toDataURL("image/png",.7);if(navigator.msSaveBlob)navigator.msSaveBlob(f(d),c.outputImageName?c.outputImageName+".png":"createdImage.png");else{var e=document.createElement("a");e.href=d,e.download=c.outputImageName?c.outputImageName+".png":"createdImage.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}function H(a){var c=b[a];h(a,function(){function d(a){a>30||(console.log(b),b&&b.document?e():setTimeout(function(){d(a+1)},200))}function e(){var c=b.document.createElement("img");c.setAttribute("src",a),c.style.width="100%",c.style.transform="rotate(180deg)",c.style.webkitTransform="rotate(180deg)",b.document.body.appendChild(c),b.document.close(),b.focus(),setTimeout(function(){b.print(),b.close()},100)}var a=c.canvas.toDataURL("image/png",1),b=window.open();d(0)})}function J(a){return I+=1}function K(a){var c=b[a],d=window.location.protocol+"//"+window.location.hostname+window.location.pathname;d+="?sb=sb"+c.hash+"x";for(var e=0,f=0;f<c.backdrops.length;f++)c.backdrop===c.backdrops[f]&&(e=f);for(d+="b"+e+"x",f=0;f<c.objects.length;f++)d+="i"+c.objects[f].hash,d+="t"+c.objects[f].top,d+="l"+c.objects[f].left,d+="w"+c.objects[f].widthPercentage,d+="a"+c.objects[f].angle,d+="m"+(c.objects[f].mirror?1:0),f!==c.objects.length-1&&(d+="x");return d}function L(a){var d=(b[a],K(a));P(a,"sb_shareURL",'<p>Copy and paste this URL to share your image:</p><input type="text" value="'+d+'" onclick="this.select();"></input><br><a class="button close">close</a>')}function M(a){var b=K(a);window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(b),"_blank","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")}function N(a){var b=K(a);window.open("https://twitter.com/share?url="+encodeURIComponent(b),"_blank","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")}function O(a){var c=b[a],d=window.location.search.match(/sb=([^&]*)/);if(d&&d.length>1&&(d=d[1]),d&&d.match(/^sb\d+xb\d+x(i\d+t-?\d+l-?\d+w\d+a-?\d+m\d+x?)+$/)&&(d=d.split("x"),d[0]==="sb"+c.hash)){c.backdrop=c.backdrops[parseInt(d[1].substr(1))];for(var e=2;e<d.length;e++)j(a,!1,!1,{hash:parseInt(d[e].match(/i(\d+)/)[1]),top:parseInt(d[e].match(/t(-?\d+)/)[1]),left:parseInt(d[e].match(/l(-?\d+)/)[1]),widthPercentage:parseInt(d[e].match(/w(\d+)/)[1]),angle:parseInt(d[e].match(/a(-?\d+)/)[1]),mirror:parseInt(d[e].match(/m(\d+)/)[1])})}}function P(a,c,d){var e=b[a],f=document.createElement("div");f.classList.add("sb_popup"),f.setAttribute("id",c),f.innerHTML=d,Q(a,f),e.container.appendChild(f);for(var g=f.getElementsByClassName("close"),h=function(){Q(a)},i=0;i<g.length;i++)g[i].onclick=h;return e.canvas.classList.add("fade"),f.classList.add("active"),f}function Q(a,c){var d=b[a],e=document.getElementsByClassName("sb_popup");d.canvas.classList.remove("fade");for(var f=0;f<e.length;f++)e[f]!==c&&e[f].classList.remove("active");setTimeout(function(){for(var a=0;a<e.length;a++)e[a]!==c&&d.container.removeChild(e[a])},200)}function R(a){if("string"!=typeof a)return void d("Hex colors must be strings");if("#"===a[0]&&(a=a.substr(1,a.length)),6!==a.length)return void d("Incorrect hex color length");if(!a.match(/[a-f\d]{6}/i))return void d("Hex color contains invalid characters");var b=parseInt(a,16),c=b>>16&255,e=b>>8&255,f=255&b;return[c,e,f].join()}function S(a){if("number"==typeof a)return a;if("string"!=typeof a||!a.match(/^\d+:\d+$/))return void d("Invalid aspect ratio provided");var b=a.match(/^\d+/)[0],c=a.match(/\d+$/)[0];return b/c}function T(a,c){function u(a,b,f,g){var h=document.createElement("div");h.classList.add("sb_tool"),h.classList.add("sb_icon"),h.setAttribute("id",a),h.addEventListener("click",function(){var b=(new Date).getTime();b-m<500||(m=b,w(c,a))}),h.addEventListener("touchstart",function(){var b=(new Date).getTime();b-m<500||(m=b,w(c,a))});var i=document.createElement("i");i.classList.add("fa"),i.classList.add(f),g&&i.classList.add("fa-flip-horizontal"),i.setAttribute("aria-hidden","true");var j=document.createElement("div");j.classList.add("sb_tooltip"),j.appendChild(document.createTextNode(b)),h.appendChild(i),h.appendChild(j),d.toolNodes[a]=h,e.appendChild(h)}function v(a,b,c,e){var g=document.createElement("div");g.classList.add("sb_action"),g.classList.add("sb_icon"),g.setAttribute("id",b),g.addEventListener("click",function(a){a.preventDefault();var b=(new Date).getTime();b-m<500||(m=b,e(d))}),g.addEventListener("touchstart",function(a){a.preventDefault();var b=(new Date).getTime();b-m<500||(m=b,e(d))});var h=document.createElement("i");h.classList.add("fa"),h.classList.add(c),h.setAttribute("aria-hidden","true");var i=document.createElement("div");i.classList.add("sb_tooltip"),i.appendChild(document.createTextNode(b)),g.appendChild(h),g.appendChild(i),d.actionNodes[a]=g,f.appendChild(g)}function x(a){return"sb_drawer_"+a.replace(/^a-z/i,"")+"_"+Math.floor(1e4*Math.random())}function y(a,c){var d=b[a],e=d.drawerButtonBar.scrollLeft,f=d.drawerButtonBar.clientWidth-d.drawerButtons[0].clientWidth-d.drawerButtons[1].clientWidth,g=d.drawerButtonSlider.clientWidth;if(!(g<=f)){var h=g-f;"right"===c&&e<h?d.drawerButtonBar.scrollLeft=e+4:"left"===c&&e>0&&(d.drawerButtonBar.scrollLeft=e-4)}}function z(a,b){function e(){y(c,b),d&&setTimeout(e,10)}function f(){window.removeEventListener("mouseup",f),window.removeEventListener("touchend",f),d=!1}a.preventDefault();var d=!0;window.addEventListener("mouseup",f),window.addEventListener("touchend",f),e()}function A(a,b,e){function m(a){return function(){j(c,b,a)}}function n(a){return function(){d.backdrop=d.backdrops[a],i(c),F(c)}}var f=document.createElement("div");f.classList.add("sb_drawer"),f.classList.add("sb_button"),f.appendChild(document.createTextNode(b)),f.addEventListener("click",function(){E(c,a)});var g=document.createElement("div");g.classList.add("sb_drawer"),g.classList.add("sb_content");var h,l;if("Backdrops"!==b)for(l=0;l<d.stickers[b].length;l++)h=d.stickers[b][l],h.image.onclick=m(l),g.appendChild(h.image);else for(l=0;l<d.backdrops.length;l++)h=d.backdrops[l],h.onclick=n(l),g.appendChild(h);d.drawerNodes.button[a]=f,d.drawerNodes.content[a]=g,k.appendChild(f),q.appendChild(g)}var d=b[c],e=document.createElement("div");e.classList.add("sb_tools"),e.classList.add("sb_bar"),d.barNodes.toolbar=e;var f=document.createElement("div");f.classList.add("sb_actions"),f.classList.add("sb_bar"),d.barNodes.actionbar=f;var g=document.createElement("div");g.classList.add("sb_drawers"),d.barNodes.drawerbar=g;var h=document.createElement("div");h.classList.add("sb_drawer_buttons"),g.appendChild(h),d.drawerButtonBar=h;var k=document.createElement("div");k.classList.add("sb_drawer_slider"),k.style.left="0px",h.appendChild(k),d.drawerButtonSlider=k;var l=document.createElement("div");l.classList.add("sb_left"),l.classList.add("sb_drawer_scroll"),l.onmousedown=function(a){z(a,"left")},l.ontouchstart=function(a){z(a,"left")};var n=document.createElement("i");n.classList.add("fa"),n.classList.add("fa-caret-left"),n.setAttribute("aria-hidden","true"),l.appendChild(n),h.appendChild(l),l.addEventListener("contextmenu",function(a){a.preventDefault()}),d.drawerButtons=[],d.drawerButtons[0]=l;var o=document.createElement("div");o.classList.add("sb_right"),o.classList.add("sb_drawer_scroll"),o.onmousedown=function(a){z(a,"right")},o.ontouchstart=function(a){z(a,"right")};var p=document.createElement("i");p.classList.add("fa"),p.classList.add("fa-caret-right"),p.setAttribute("aria-hidden","true"),o.appendChild(p),o.addEventListener("contextmenu",function(a){a.preventDefault()}),h.appendChild(o),d.drawerButtons[1]=o;var q=document.createElement("div");q.classList.add("sb_content_wrapper"),g.appendChild(q),a.appendChild(e),a.appendChild(f),a.appendChild(g),d.hideTools&&d.hideTools.indexOf("move")!==-1||u("move","Move","fa-arrows"),d.hideTools&&d.hideTools.indexOf("scale")!==-1||u("scale","Scale","fa-expand",!0),d.hideTools&&d.hideTools.indexOf("rotate")!==-1||u("rotate","Rotate","fa-repeat"),d.hideTools&&d.hideTools.indexOf("mirror")!==-1||u("mirror","Mirror","fa-exchange"),d.hideTools&&d.hideTools.indexOf("delete")!==-1||u("delete","Delete","fa-times"),d.hideTools&&d.hideTools.indexOf("back")!==-1||u("back","Layer down","fa-level-down"),d.hideTools&&d.hideTools.indexOf("forward")!==-1||u("forward","Layer up","fa-level-up"),d.hideActions&&d.hideActions.indexOf("share")!==-1||v("share","Share URL","fa-link",function(){L(c)}),d.hideActions&&d.hideActions.indexOf("facebook")!==-1||v("facebook","Share on Facebook","fa-facebook",function(){M(c)}),d.hideActions&&d.hideActions.indexOf("twitter")!==-1||v("twitter","Share on Twitter","fa-twitter",function(){N(c)}),d.hideActions&&d.hideActions.indexOf("save")!==-1||v("save","Save","fa-floppy-o",function(){G(c)}),d.hideActions&&d.hideActions.indexOf("print")!==-1||v("print","Print","fa-print",function(){H(c)});for(var r in d.actions)v(r,d.actions[r].tooltip,d.actions[r].icon,d.actions[r].action);d.backdrops.length>1&&A(x("Backdrops"),"Backdrops",0);var s=1;for(var t in d.stickers)A(x(t),t,s),s++}function U(a){a=a||{};var b=c;b=b.replace(/#100000/g,a.applicationBG||"#262626"),b=b.replace(/#100001/g,a.leftBarBG||"#333333"),b=b.replace(/#100002/g,a.leftBarButtons||"#333333"),b=b.replace(/#100003/g,a.leftBarButtonsHover||"#000000"),b=b.replace(/#100004/g,a.leftBarButtonsActive||"#FF1A73"),b=b.replace(/#100005/g,a.leftBarIcons||"#999999"),b=b.replace(/#100006/g,a.leftBarIconsHover||"#FFFFFF"),b=b.replace(/#100007/g,a.leftBarIconsActive||"#FFFFFF"),b=b.replace(/0px 0px 0px #100001/g,a.leftBarShadow||"0px 0px 5px rgba(0, 0, 0, 0.5)"),b=b.replace(/#100011/g,a.rightBarBG||"#333333"),b=b.replace(/#100012/g,a.rightBarButtons||"#333333"),b=b.replace(/#100013/g,a.rightBarButtonsHover||"#000000"),b=b.replace(/#100014/g,a.rightBarButtonsActive||"#FF1A73"),b=b.replace(/#100015/g,a.rightBarIcons||"#999999"),b=b.replace(/#100016/g,a.rightBarIconsHover||"#FFFFFF"),b=b.replace(/#100017/g,a.rightBarIconsActive||"#FFFFFF"),b=b.replace(/0px 0px 0px #100011/g,a.rightBarShadow||"0px 0px 5px rgba(0, 0, 0, 0.5)"),b=b.replace(/#100021/g,a.tooltipText||"#333333"),b=b.replace(/#100022/g,a.tooltipBG||"#FFF41A"),b=b.replace(/#100031/g,a.drawerBarBG||"#333"),b=b.replace(/#100032/g,a.drawerBarButtons||"#333"),b=b.replace(/#100033/g,a.drawerBarButtonsHover||"#222"),b=b.replace(/#100034/g,a.drawerBarButtonsActive||"#111"),b=b.replace(/#100035/g,a.drawerBarText||"#AAA"),b=b.replace(/#100036/g,a.drawerBarTextHover||"#FFF"),b=b.replace(/#100037/g,a.drawerBarTextActive||"#FFF"),b=b.replace(/0px 0px 0px #100031/g,a.drawerBarShadow||"0px 0px 5px rgba(0, 0, 0, 0.5)"),b=b.replace(/#100041/g,a.drawerBG||"#111"),b=b.replace(/#100051/g,a.scrollButtons||"#333"),b=b.replace(/#100052/g,a.scrollButtonsBorders||"#222"),b=b.replace(/#100053/g,a.scrollButtonsIcons||"#999"),b=b.replace(/#100054/g,a.scrollButtonsHover||"#222"),b=b.replace(/#100055/g,a.scrollButtonsBordersHover||"#222"),b=b.replace(/#100056/g,a.scrollButtonsIconsHover||"#FFF"),b=b.replace(/Arial/g,a.font||"Arial");var d=document.createElement("style");d.type="text/css",d.styleSheet?d.styleSheet.cssText=b:d.appendChild(document.createTextNode(b)),document.getElementsByTagName("head")[0].appendChild(d)}function V(a,c){for(var e=function(a){return function(){var c=b[a];c.imagesLoaded++,c.imagesLoaded===c.images&&(Q(a),O(a)),i(a)}},f=0;f<c.length;f++){if("string"!=typeof c[f])return void d("Expected path to image as string. Check your stickers and backdrops properties for proper formatting.");if(!c[f].match(/\.(jpg|jpeg|png|bmp|svg|gif|webp)$/))return void d("Path to non-image provided. Check the paths in your stickers and backdrops properties.");var g=c[f];c[f]=new Image,c[f].src=g,c[f].setAttribute("width","auto"),c[f].setAttribute("height","auto"),c[f].onload=e(a)}return c}function W(a,c){var e=0,f=function(a,c,d,e){return function(){var f=b[a];f.imagesLoaded++,f.imagesLoaded===f.images&&(Q(a),O(a));var g=h(c,d,e);g.heightFxWidth||(g.heightFxWidth=(g.image.naturalHeight||g.image.height)/(g.image.naturalWidth||g.image.width)||1),i(a)}},g=function(){var c=b[a].guideColors;return c[Math.floor(Math.random()*c.length)]},h=function(a,b,c){return a[b][c]};if("object"!=typeof c)return void d("Invalid image object provided for stickers.");for(var j in c){if("object"!=typeof c[j]||c[j].length<0)return void d("Did not find expected array of paths in stickers object.");for(var l,m=0;m<c[j].length;m++){if(l=c[j][m],"string"!=typeof l.name)return void d("Sticker needs a name.");if(l.hash=J(l.name),l.image=new Image,l.image.src=l.src,l.image.alt=l.name,l.image.draggable=!1,l.image.setAttribute("width","auto"),l.image.setAttribute("height","auto"),l.image.onload=f(a,c,j,m),l.widthPercentage||(l.widthPercentage=20),"number"!=typeof l.widthPercentage||l.widthPercentage<1)return void d("Sticker widthPercentage must be a number greater than 1.");if(l.heightFxWidth&&"number"!=typeof l.heightFxWidth)return void d("Sticker heightFxWidth must be a number.");if(l.left||(l.left="center"),l.top||(l.top="center"),"number"!=typeof l.left&&"string"!=typeof l.left||"string"==typeof l.left&&"center"!==l.left)return void d('Sticker left must be a number (as a percentage) or the string "center".');if("number"!=typeof l.top&&"string"!=typeof l.top||"string"==typeof l.top&&"center"!==l.top)return void d('Sticker top must be a number (as a percentage) or the string "center".');if(l.angle||(l.angle=0),"number"!=typeof l.angle||l.angle<0||l.angle>360)return void d("Sticker angle must be a number 0-360.");if(l.guideColor||(l.guideColor=g),"function"!=typeof l.guideColor&&"string"!=typeof l.guideColor)return void d("Expected a function or hex string for sticker guide color.");if("string"==typeof l.guideColor&&!l.guideColor.match(/#?[a-f\d]{6}/i))return void d("Invalid guide color. Expected a hex string.");"string"==typeof l.guideColor&&(l.guideColor=R(l.guideColor)),e++}}return[c,e]}function X(a){if(!a)return{};if("object"!=typeof a)return d("Custom actions expects an object."),{};for(var b in a){if("object"!=typeof a[b])return d("Each custom action must be an object."),{};if("string"!=typeof a[b].icon)return d("Please specify a Font Awesome class for your custom action's icon property."),{};if("string"!=typeof a[b].tooltip)return d("Please pass a string for your custom action's tooltip property."),{};if("function"!=typeof a[b].action)return d("Please pass a function for your custom action's action property."),{}}return a}a=a||{};var b=[],c='.stickerbomb{-moz-user-select:none;-ms-user-select:none;-o-user-select:none;-webkit-user-select:none;background-color:#100000;box-sizing:border-box;display:inline-block;font-family:"Arial";font-size:0px;overflow:hidden;padding:0px 2.5rem 2.5rem 2.5rem;position:relative;text-align:center;user-select:none;width:100%;min-height:17rem}@media screen and (max-width: 500px){.stickerbomb{padding:0px 2rem 2rem 2rem}}.stickerbomb div{box-sizing:border-box}.sb_canvas{width:100%;min-height:1rem;cursor:pointer;position:relative;z-index:1;-webkit-tap-highlight-color:transparent;transition:opacity 200ms linear;opacity:1}.sb_canvas.fade{opacity:0.5}.sb_logo{position:absolute;z-index:3;right:0.5rem;bottom:4rem;width:2rem}.sb_popup{background-color:#100000;box-shadow:0px 0px 0px #100011;left:10%;opacity:0;padding:1.2rem;pointer-events:none;position:absolute;text-align:center;top:50%;transform:translateY(-50%);-webkit-transform:translateY(-50%);transition:opacity 200ms linear;width:80%;z-index:5;font-size:1rem;color:#100015}@media screen and (max-width: 500px){.sb_popup{padding:0.3rem;top:25%;width:70%;left:15%;-webkit-transform:translateY(-25%)}}.sb_popup.active{opacity:1;pointer-events:auto}.sb_popup p{margin-top:0px}.sb_popup input{border:0px;background-color:#100012;width:100%;padding:0.5rem;margin-bottom:0.5rem;box-sizing:border-box;color:#100015}.sb_popup button,.sb_popup a.button{background-color:#100012;color:#100015;padding:0.5rem;margin:0px 0.25rem;display:inline-block;cursor:pointer}.sb_bar{position:absolute;top:0px;display:inline-block;z-index:2;height:100%;overflow:visible;padding-bottom:2.5rem}@media screen and (max-width: 500px){.sb_bar{padding-bottom:2rem}}.sb_bar.sb_tools{background-color:#100001;box-shadow:0px 0px 0px #100001;left:0px}.sb_bar.sb_tools .sb_icon{background-color:#100002;color:#100005}.sb_bar.sb_tools .sb_icon:hover{background-color:#100003;color:#100006}.sb_bar.sb_tools .sb_icon.active{background-color:#100004;color:#100007}.sb_bar.sb_actions{background-color:#100011;box-shadow:0px 0px 0px #100011;right:0px}.sb_bar.sb_actions .sb_icon{background-color:#100012;color:#100015}.sb_bar.sb_actions .sb_icon:hover{background-color:#100013;color:#100016}.sb_bar.sb_actions .sb_icon.active{background-color:#100014;color:#100017}.sb_icon{display:block;position:relative;width:2.5rem;height:2.5rem;text-align:center;cursor:pointer;font-size:1.5rem;line-height:2.5rem}.sb_icon i{font-size:1.5rem;line-height:2.5rem}@media screen and (max-width: 500px){.sb_icon{width:2rem;height:2rem;font-size:1.3rem;line-height:2rem}.sb_icon i{font-size:1.3rem;line-height:2rem}}.sb_icon .sb_tooltip{display:none;pointer-events:none;font-size:1rem;line-height:1rem;padding:0.5rem;background-color:#100022;color:#100021;position:absolute;top:50%;transform:translateY(-50%);-webkit-transform:translateY(-50%);white-space:nowrap;width:auto;height:auto;z-index:2}.sb_tool .sb_tooltip{left:108%}.sb_action .sb_tooltip{right:108%}.sb_icon:hover .sb_tooltip{display:inline-block}.sb_icon .sb_tooltip:after{content:"";position:absolute;border-style:solid;display:block;width:0;top:50%;transform:translateY(-50%);-webkit-transform:translateY(-50%)}.sb_tools .sb_icon .sb_tooltip:after{border-color:transparent #100022;border-width:7px 10px 7px 0px;right:100%}.sb_actions .sb_icon .sb_tooltip:after{border-color:transparent #100022;border-width:7px 0px 7px 10px;left:100%}.sb_drawers{background-color:#100041;bottom:-11rem;box-shadow:0px 0px 0px #100031;display:block;height:13.5rem;left:0px;overflow-x:auto;position:absolute;transition:bottom 200ms linear;width:100%;z-index:4;overflow-x:hidden}@media screen and (max-width: 500px){.sb_drawers{bottom:-6rem;height:8rem}}.sb_drawers:after{content:"";height:11rem;left:0px;pointer-events:none;position:absolute;top:2.5rem;width:100%;z-index:2}@media screen and (max-width: 500px){.sb_drawers:after{height:6rem;top:2rem}}.sb_drawers.active{bottom:0px}.sb_drawers .sb_drawer_buttons{background-color:#100031;height:4.5rem;padding:0px 2.5rem;overflow-x:auto}@media screen and (max-width: 500px){.sb_drawers .sb_drawer_buttons{height:4rem;padding:0px 2rem}}.sb_drawers .sb_drawer_buttons .sb_drawer_slider{display:inline-block;position:relative;white-space:nowrap}.sb_drawers .sb_drawer_buttons .sb_drawer_scroll{display:inline-block;position:absolute;top:0px;height:2.5rem;width:2.5rem;background-color:#100051;color:#100053;z-index:2;font-size:1.5rem;line-height:2.5rem;cursor:pointer}@media screen and (max-width: 500px){.sb_drawers .sb_drawer_buttons .sb_drawer_scroll{height:2rem;width:2rem;font-size:1.3rem;line-height:2rem}}.sb_drawers .sb_drawer_buttons .sb_drawer_scroll.sb_left{left:0px;border-right:1px solid #100052}.sb_drawers .sb_drawer_buttons .sb_drawer_scroll.sb_right{right:0px;border-left:1px solid #100052}.sb_drawers .sb_drawer_buttons .sb_drawer_scroll:hover{background-color:#100054;color:#100056}.sb_drawers .sb_drawer_buttons .sb_drawer_scroll:hover.sb_left{border-right:1px solid #100055}.sb_drawers .sb_drawer_buttons .sb_drawer_scroll:hover.sb_right{border-left:1px solid #100055}@media screen and (max-width: 500px){.sb_drawers .sb_drawer_buttons .sb_drawer_scroll{display:none}}.sb_drawers .sb_drawer_buttons .sb_button{color:#100035;background-color:#100032;cursor:pointer;display:inline-block;font-size:1.2rem;line-height:2.5rem;height:2.5rem;padding:0px 1rem;position:relative}@media screen and (max-width: 500px){.sb_drawers .sb_drawer_buttons .sb_button{font-size:1rem;line-height:2rem;height:2rem}}.sb_drawers .sb_drawer_buttons .sb_button:hover{background-color:#100033;color:#100036}.sb_drawers .sb_drawer_buttons .sb_button.active{background-color:#100034;color:#100037}.sb_drawers .sb_content_wrapper{background-color:#100041;top:2.5rem;left:0px;position:absolute;width:100%;height:11rem}@media screen and (max-width: 500px){.sb_drawers .sb_content_wrapper{top:2rem;height:6rem}}.sb_drawers .sb_content_wrapper .sb_content{background-color:#100041;position:absolute;top:0px;width:100%;opacity:0;transition:opacity 150ms linear;height:11rem;padding:0px 1rem;pointer-events:none;white-space:nowrap;overflow-x:auto}@media screen and (max-width: 500px){.sb_drawers .sb_content_wrapper .sb_content{height:6rem}}.sb_drawers .sb_content_wrapper .sb_content.active{opacity:1;pointer-events:auto;z-index:1}.sb_drawers .sb_content_wrapper .sb_content img,.sb_drawers .sb_content_wrapper .sb_content object{height:7.95rem !important;margin:1rem;cursor:pointer;position:relative;width:auto !important}@media screen and (max-width: 500px){.sb_drawers .sb_content_wrapper .sb_content img,.sb_drawers .sb_content_wrapper .sb_content object{height:4rem !important}}',m=(new Date).getTime(),I=0;return a=function(a){if("string"!=typeof a.target)return void d("No target!");if("object"!=typeof a.stickers)return void d("No stickers were specified!");if("object"!=typeof a.backdrops)return void d("No backdrops were specified!");if(a.maxWidth&&"number"!=typeof a.maxWidth)return void d("maxWidth needs to be in pixels");if(a.styles){if(a.styles.guideColors&&"object"!=typeof a.style.guideColors)return void d("guideColors should be an array of hex values");if(a.styles.guideOpacity&&"number"!=typeof a.style.guideOpacity)return void d("guideOpacity must be a number 0-1")}document.querySelector(a.container+" canvas")&&d("Canvas already present in specified container");var c=b.length,e=document.querySelector(a.target),f=document.createElement("div");f.classList.add("stickerbomb"),e.appendChild(f);var h=document.createElement("canvas");h.classList.add("sb_canvas"),h.setAttribute("width",""+(a.maxWidth?a.maxWidth:800)),f.appendChild(h);var j=h.getContext("2d"),k=V(c,a.backdrops),l=W(c,a.stickers),o=X(a.actions);U(a.styles);var p=["255,244,26"];a.styles&&a.styles.guideColors&&(p=a.styles.guideColors.map(function(a){return R(a)}));var q=.8;a.styles&&a.styles.guideOpacity&&(q=a.styles.guideOpacity);var r="#FFFFFF";a.styles&&a.styles.guideNumberColor&&(r=a.styles.guideNumberColor);var s={target:a.target,hash:J(a.target),container:f,aspectRatio:a.aspectRatio?S(a.aspectRatio):1.55,canvas:h,context:j,stickers:l[0],backdrops:k,backdrop:k[0],objects:[],canvasHCenter:0,canvasVCenter:0,tool:"move",barNodes:{toolbar:!1,actionbar:!1,drawerbar:!1},hideTools:a.hideTools||!1,toolNodes:{},actionNodes:{},actions:o,hideActions:a.hideActions||!1,drawerNodes:{button:{},content:{}},guides:!1,guideColors:p,guideOpacity:q,guideNumberColor:r,outputImageName:!!a.outputImageName&&a.outputImageName,images:k.length+l[1],imagesLoaded:0,render:function(){i(c)},makePopup:function(a){P(c,"createdPopup",a)},closePopups:function(){Q(c,!1)}};return b.push(s),T(f,c),w(c,"move"),function(){g(c)}(),window.addEventListener("load",function(){g(c)}),window.addEventListener("resize",function(){g(c)}),h.addEventListener("mousedown",function(a){a.preventDefault(),F(c),b[c].guides=!0,setTimeout(function(){i(c)},100),n(c,a)}),h.addEventListener("touchstart",function(a){F(c),b[c].guides=!0,setTimeout(function(){i(c);
},100),n(c,a)}),h.addEventListener("touchmove",function(a){a.preventDefault()}),h.addEventListener("mouseup",function(){v(b[c].tool)||(b[c].guides=!1,i(c))}),h.addEventListener("touchend",function(){v(b[c].tool)||(b[c].guides=!1,i(c))}),P(c,"sb_loading",'<i class="fa fa-spin fa-circle-o-notch" style="font-size: 4rem;"></i><br><br>Loading stickers...'),b[c]}}(stickerbomb||{});
